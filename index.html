<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ğŸ’˜ Rizana</title>

  <style>
    :root{
      --pink1:#ffd1e8;
      --pink2:#ffb3d9;
      --card:#ffffffcc;
      --accent:#ff4d9d;
      --accent2:#ff2e86;
      --text:#3a1b2a;
      --shadow: 0 20px 60px rgba(0,0,0,.14);
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      overflow:hidden;
      position:relative;
    }

    /* Background photo layer */
    .bg-photo{
      position:absolute;
      inset:-40px; /* extra to avoid blur edges */
      background-image: url("./rizana.jpg");
      background-size: cover;
      background-position: 50% 65%;
      filter: blur(8px) saturate(1.05);
      transform: scale(1.03);
      opacity: 0.9;
      z-index: -3;
    }

    /* Pink overlay so it stays romantic */
    .bg-overlay{
      position:absolute;
  inset:0;
  background:
    linear-gradient(
      135deg,
      rgba(255, 230, 240, 0.30),
      rgba(255, 200, 220, 0.30)
    );
  z-index:-2;
    }

    /* Floating hearts */
    .heart{
      position:absolute;
      font-size:20px;
      opacity:.35;
      animation: floatUp linear infinite;
      user-select:none;
      pointer-events:none;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.08));
      z-index:-1;
    }
    @keyframes floatUp{
      from{ transform: translateY(25vh) translateX(0) rotate(0deg); }
      to  { transform: translateY(-120vh) translateX(60px) rotate(360deg); }
    }

    .card{
      width:min(600px, 92vw);
      background:var(--card);
      backdrop-filter: blur(10px);
      border: 2px solid #ffffff90;
      border-radius:26px;
      box-shadow: var(--shadow);
      padding:28px 22px 22px;
      text-align:center;
      position:relative;
    }

    h1{
      margin:6px 0 8px;
      font-size: clamp(26px, 4vw, 40px);
      letter-spacing: .2px;
    }

    .subtitle{
      margin:0 0 16px;
      font-size: 16px;
      opacity:.88;
      line-height:1.35;
    }

    .big-emoji{
      font-size:46px;
      margin-bottom:8px;
      animation: pop 1.8s ease-in-out infinite;
    }
    @keyframes pop{
      0%,100%{ transform: scale(1); }
      50%{ transform: scale(1.07); }
    }

    .buttons-wrap{
  margin-top:16px;
  height:220px; /* MORE SPACE FOR MOBILE */
  position:relative;
  border-radius:18px;
  background: linear-gradient(180deg, #ffffff85, #ffffff40);
  border: 1px dashed #ffffffaa;
  overflow:hidden;
}

@media (min-width: 768px){
  .buttons-wrap{
    height:140px; /* desktop stays the same */
  }
}

    button{
      border:none;
      padding:14px 18px;
      font-size:18px;
      border-radius:999px;
      cursor:pointer;
      box-shadow: 0 10px 22px rgba(0,0,0,.12);
      transition: transform .12s ease, box-shadow .12s ease;
      touch-action: manipulation;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    button:active{ transform: scale(.98); }

    #yesBtn{
      background: linear-gradient(180deg, var(--accent), var(--accent2));
      color:white;
      position:absolute;
      left: 50%;
      top: 34px;
      transform: translateX(-50%);
      min-width: 170px;
    }
    #yesBtn:hover{ box-shadow: 0 14px 28px rgba(255,77,157,.35); }

    #noBtn{
      background: white;
      color: var(--text);
      position:absolute;
      left: 14%;
      top: 36px;
      min-width: 150px;
      border: 2px solid #ffffff;
    }

    .micro{
      margin-top:12px;
      font-size:13px;
      opacity:.78;
      min-height: 18px;
    }

    .toast{
      margin-top:10px;
      font-size:16px;
      min-height: 24px;
      font-weight: 700;
      color: #7a1f4a;
    }

    .final{
      display:none;
      margin-top:14px;
      padding:16px 14px;
      border-radius:18px;
      background: #ffffffb8;
      border: 1px solid #ffffff;
      box-shadow: 0 12px 26px rgba(0,0,0,.10);
    }
    .final h2{
      margin:0 0 8px;
      font-size:22px;
      color:#5c1335;
    }
    .final p{
      margin:0;
      line-height:1.35;
      font-size:16px;
    }

    /* Song section */
    .songBox{
      margin-top:14px;
      padding:12px;
      border-radius:16px;
      background: #ffffffa8;
      border: 1px solid #ffffff;
    }
    .songNote{
      font-size:13px;
      opacity:.75;
      margin: 0 0 10px;
    }
    #playBtn{
      width:100%;
      background: linear-gradient(180deg, #ff7bb9, #ff3e97);
      color:white;
      font-weight:800;
      letter-spacing:.2px;
      animation: pulse 1.3s ease-in-out infinite;
    }
    @keyframes pulse{
      0%,100%{ transform: scale(1); box-shadow: 0 12px 26px rgba(255,62,151,.25); }
      50%{ transform: scale(1.03); box-shadow: 0 18px 36px rgba(255,62,151,.32); }
    }
    .tiny{
      font-size:12px;
      opacity:.65;
      margin-top:10px;
    }

    .hint{
      margin-top:12px;
      font-size: 13px;
      opacity:.7;
    }
  </style>
</head>

<body>
  <!-- background layers -->
  <div class="bg-photo"></div>
  <div class="bg-overlay"></div>

  <div class="card" id="card">
    <div class="big-emoji">ğŸ’˜</div>
    <h1>Rizana, will you be my Valentine?</h1>
    <p class="subtitle">
      Long distance canâ€™t stop me from asking the most important question ğŸ˜ŒğŸ’—
    </p>

    <div class="buttons-wrap" id="arena" aria-label="Valentine buttons area">
      <button id="yesBtn" aria-label="Yes button">Yes ğŸ’–</button>
      <button id="noBtn" aria-label="No button">No ğŸ™ƒ</button>
    </div>

    <div class="micro" id="microText"></div>
    <div class="toast" id="toast" role="status" aria-live="polite"></div>

    <div class="final" id="final">
      <h2>Perfect, my love ğŸ’—</h2>
      <p>Be ready on February 14thâ€¦ Iâ€™ll let you know the time and everything ğŸ˜Œ</p>

      <div class="songBox">
        <p class="songNote">ğŸ¶ A song for you.</p>
        <button id="playBtn" aria-label="Play our song">Play our song â–¶ï¸</button>
        <div class="tiny" id="songStatus"></div>
      </div>

      <div class="tiny">Screenshot this and send it to me ğŸ˜ˆ</div>
    </div>

    <div class="hint">Tip: try pressing â€œNoâ€ ğŸ˜ˆ</div>
  </div>

  <!-- audio (iPhone-friendly: must be started by a click) -->
  <audio id="song" src="our-song.mp3" preload="auto"></audio>

  <script>
    // ===== Config =====
    const WRONG_MESSAGES = [
      "Nope ğŸ˜Œ",
      "Wrong button ğŸ˜­",
      "Nice try ğŸ˜‚",
      "Itâ€™s a yes day ğŸ’–",
      "Be seriousâ€¦ ğŸ˜ˆ"
    ];

    // YES multi-click prompts (small text after each click)
    const YES_STEPS = [
      { btn: "Are you sure? ğŸ¤¨", small: "Think carefullyâ€¦ this is serious ğŸ˜Œ" },
      { btn: "Really sure?? ğŸ˜³", small: "No pressureâ€¦ but also yes pressure ğŸ˜­ğŸ’—" },
      { btn: "Okay ğŸ’–", small: "Good choice ğŸ˜Œ now confirm it." }
    ];
    // ===================

    const arena = document.getElementById("arena");
    const noBtn = document.getElementById("noBtn");
    const yesBtn = document.getElementById("yesBtn");
    const toast = document.getElementById("toast");
    const microText = document.getElementById("microText");
    const finalBox = document.getElementById("final");

    const song = document.getElementById("song");
    const playBtn = document.getElementById("playBtn");
    const songStatus = document.getElementById("songStatus");

    // Floating hearts
    const hearts = ["ğŸ’—","ğŸ’–","ğŸ’˜","ğŸ’•","ğŸ’"];
    for (let i = 0; i < 18; i++){
      const h = document.createElement("div");
      h.className = "heart";
      h.textContent = hearts[Math.floor(Math.random()*hearts.length)];
      h.style.left = Math.random()*100 + "vw";
      h.style.animationDuration = (6 + Math.random()*8) + "s";
      h.style.animationDelay = (-Math.random()*10) + "s";
      h.style.fontSize = (16 + Math.random()*22) + "px";
      document.body.appendChild(h);
    }

    function rand(min, max){ return Math.floor(Math.random()*(max-min+1))+min; }

    function moveNoButton(){
      const aRect = arena.getBoundingClientRect();
      const bRect = noBtn.getBoundingClientRect();

      const padding = window.innerWidth < 768 ? 20 : 10;
      const maxLeft = aRect.width - bRect.width - padding;
      const maxTop  = aRect.height - bRect.height - padding;

      const left = rand(padding, Math.max(padding, maxLeft));
      const top  = rand(window.innerWidth < 768 ? 60 : padding, Math.max(padding, maxTop));

      noBtn.style.left = left + "px";
      noBtn.style.top = top + "px";

      toast.textContent = WRONG_MESSAGES[rand(0, WRONG_MESSAGES.length - 1)];
      microText.textContent = "";
    }

    // No dodges (desktop + iPhone)
    noBtn.addEventListener("mouseenter", moveNoButton);
    noBtn.addEventListener("touchstart", (e) => {
      e.preventDefault();
      moveNoButton();
    }, { passive: false });

    noBtn.addEventListener("click", (e) => {
      e.preventDefault();
      moveNoButton();
    });

    arena.addEventListener("touchmove", moveNoButton, { passive: true });

    arena.addEventListener("mousemove", (e) => {
      const b = noBtn.getBoundingClientRect();
      const dx = e.clientX - (b.left + b.width/2);
      const dy = e.clientY - (b.top + b.height/2);
      const dist = Math.sqrt(dx*dx + dy*dy);
      if (dist < 90) moveNoButton();
    });

    // YES requires 3 clicks with small texts
    let yesStep = 0;
    yesBtn.addEventListener("click", () => {
      toast.textContent = "";

      // Steps 0 and 1: change text + show micro text
      if (yesStep < YES_STEPS.length - 1) {
        microText.textContent = YES_STEPS[yesStep].small;
        yesBtn.textContent = YES_STEPS[yesStep].btn;
        yesStep++;
        return;
      }

      // Final click: show final screen
      microText.textContent = YES_STEPS[YES_STEPS.length - 1].small;
      yesBtn.textContent = YES_STEPS[YES_STEPS.length - 1].btn;

      finalBox.style.display = "block";
      noBtn.style.display = "none";
      yesBtn.textContent = "YAY ğŸ’";
      yesBtn.style.transform = "translateX(-50%) scale(1.03)";
      confettiHearts();
    });

    function confettiHearts(){
      for (let i = 0; i < 28; i++){
        const s = document.createElement("div");
        s.className = "heart";
        s.textContent = hearts[Math.floor(Math.random()*hearts.length)];
        const cardRect = document.getElementById("card").getBoundingClientRect();
        s.style.left = (cardRect.left + cardRect.width/2 + rand(-140,140)) + "px";
        s.style.top = (cardRect.top + rand(0,90)) + "px";
        s.style.opacity = .85;
        s.style.animationDuration = (3 + Math.random()*3) + "s";
        document.body.appendChild(s);
        setTimeout(()=>s.remove(), 6000);
      }
    }

    // Song button (iPhone safe: user action)
    function setSongStatus(msg){ songStatus.textContent = msg; }

    playBtn.addEventListener("click", async () => {
      try {
        if (song.paused) {
          await song.play();
          playBtn.textContent = "Pause â¸ï¸";
          setSongStatus("Playing ğŸ’—");
        } else {
          song.pause();
          playBtn.textContent = "Play our song â–¶ï¸";
          setSongStatus("Paused ğŸ˜Œ");
        }
      } catch (err) {
        // If iPhone blocks for any reason, user can tap again
        setSongStatus("Tap again â€” iPhone sometimes needs a second tap ğŸ˜­");
      }
    });

    song.addEventListener("ended", () => {
      playBtn.textContent = "Play our song â–¶ï¸";
      setSongStatus("Replay? ğŸ˜ŒğŸ’–");
    });

    // Start with a random "No" position
    window.addEventListener("load", () => moveNoButton());
    window.addEventListener("resize", () => moveNoButton());
  </script>
</body>
</html>
